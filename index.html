<html>
  <head>
    <title>Web RWKV RealWeb</title>
    <link rel="stylesheet" href="web/index.css" />
    <script src="web/web_rwkv_puzzles.js"></script>
    <script src="web/app.js"></script>
    <script src="web/puzzle_generator.js"></script>
    <!-- React and ReactDOM via CDN -->
    <script
      src="https://unpkg.com/react@18/umd/react.development.js"
      crossorigin
    ></script>
    <script
      src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
      crossorigin
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body>
    <h1>Web-RWKV In-Browser</h1>
    <div style="max-width: 750px; margin-top: 1rem">
      <p>
        Welcome to the Web-RWKV demo in browser! Check
        <a href="https://github.com/cryscan/web-rwkv-realweb" target="_blank"
          >the Github repo</a
        >
        for more details about this demo.
      </p>
      <p>
        Note that this demo runs on WebGPU so make sure that your browser
        support it before running (See
        <a href="https://webgpureport.org/" target="_blank">WebGPU Report</a>).
      </p>
      <p>
        Thanks to
        <a href="https://github.com/josephrocca/rwkv-v4-web" target="_blank"
          >josephrocca</a
        >
        for the first awesome in-browser implementation and the website (I am
        totally unfamiliar with web dev LoL).
      </p>
    </div>
    <div id="model">
      <h2>Puzzle 15</h2>
      <table id="modelTable">
        <tr style="font-weight: bold">
          <td>Name</td>
          <td>Source</td>
          <td>Params</td>
          <td>File size</td>
        </tr>
        <tr>
          <td>RWKV-6 Puzzle 15 Final</td>
          <td>Local Server</td>
          <td>10 M</td>
          <td>8 MB</td>
          <td>
            <button onclick="loadUrl('url', 'puzzle 15 local')">Link</button>
          </td>
        </tr>
        <tr>
          <td>RWKV-6 Puzzle 15 Final</td>
          <td>Hugging Face</td>
          <td>10 M</td>
          <td>8 MB</td>
          <td>
            <button onclick="loadUrl('url', 'puzzle 15 hf')">Link</button>
          </td>
        </tr>
      </table>
      <div style="max-width: 750px; margin-top: 1rem">
        Load model using a model URL. The URL must be a <u>direct</u> link to
        the model file. I.e. it must contain <b>/resolve/</b>, not /blob/ and
        must end in <i>.st</i>
      </div>
      <div style="background: lightgrey; padding: 0.5rem; width: fit-content">
        <input
          id="url"
          style="width: 700px"
          value="https://huggingface.co/cryscan/rwkv-puzzles/resolve/main/rwkv-puzzle15.st"
        />
        <button onclick="load()">Load</button>
      </div>
    </div>
    <div id="download" style="display: none">
      <div id="status">Initializing...</div>
      <progress id="progress" value="1"></progress>
    </div>
    <div style="max-width: 750px; margin-top: 1rem" id="reply"></div>
    <div id="root"></div>
    <script type="text/babel" src="web/ui.js"></script>
  </body>
</html>
